(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7fc1556e"],{"03f3":function(t,e,a){},"04a7":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAASCAMAAABhEH5lAAAAclBMVEUAAACrt8irt8irt8irt8irt8irt8irt8irt8irt8irt8irt8irt8irt8irt8irt8irt8irt8irt8irt8irt8irt8irt8irt8irt8irt8irt8irt8irt8irt8irt8irt8irt8irt8irt8irt8irt8irt8gtEAk5AAAAJXRSTlMA6vPaDgT35Dk008+/76eMfEksIoZ4cR4V3saXioJSCba0ZD8kvaj4NwAAAMFJREFUGNM9kFcSgzAMRNcFGwiElkJCS9v7XzGyKfshjXYk61kISiZ1llSUN2xKNQ0fleeTpovOnSZDo2h+aJWOVsujH2eumflhORNTwxHoq3edAANTIMt5SmRY5C1Q8ATFq1CU7o5MKuCjwAqQqpF4oZV4BS+BLFp1tGp4N8ugUz06GmCpNTLFV2hjSd3D+vjgHBZ0w3O0AbVFkHpgl16pbdyA5fhQsHKB8vQpvq7cjuMo0JNmvh9HGCoWEgsdT/IHti4NEvBF87UAAAAASUVORK5CYII="},"079f":function(t,e,a){},"093f":function(t,e,a){"use strict";var n=a("6bd5"),i=a.n(n);i.a},"13e1":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAASCAMAAABhEH5lAAAAPFBMVEUAAACrt8irt8irt8irt8irt8irt8irt8irt8irt8irt8irt8irt8irt8irt8irt8irt8irt8irt8irt8jZXfcsAAAAE3RSTlMA5KKmMkbs3GkY9c2UDgd1YkIjCGMN8gAAAF9JREFUGNN9z1kOgCAMRdEyyIxT979XQfNAIfF+nqRNS7TLlqMnfgUyCzpBlsZYEFr1RI7TSF4UA2EycgJ5a2pWMDcKXAsG1Issv5SLTEcoGigfPw9p5EG9gJ1Soe2GC/e2Bdy6zB2YAAAAAElFTkSuQmCC"},2426:function(t,e,a){"use strict";var n=a("f913"),i=a.n(n);i.a},3213:function(t,e,a){"use strict";var n=a("a861"),i=a.n(n);i.a},"40de":function(t,e,a){"use strict";var n=a("f416"),i=a.n(n);i.a},4572:function(t,e,a){"use strict";var n=a("03f3"),i=a.n(n);i.a},"51a8":function(t,e,a){"use strict";a("d3b7"),a("96cf");var n=a("1da1"),i=a("f899"),r={lists:function(t,e){return Object(n["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.abrupt("return",new Promise((function(a,n){i["a"].get(t,e).then((function(t){a(t)}))["catch"]((function(t){n(t)}))})));case 1:case"end":return a.stop()}}),a)})))()},delete:function(t){return Object(n["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,a){i["a"]["delete"](t).then((function(t){e(t)}))["catch"]((function(t){a(t)}))})));case 1:case"end":return e.stop()}}),e)})))()}};e["a"]=r},"5c07":function(t,e,a){"use strict";a("d3b7"),a("96cf");var n=a("1da1"),i=a("f899"),r={loadPreviewData:function(t){return Object(n["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,a){i["a"].get(t).then((function(t){e(t)}))["catch"]((function(t){a(t)}))})));case 1:case"end":return e.stop()}}),e)})))()}};e["a"]=r},6343:function(t,e,a){"use strict";var n=a("079f"),i=a.n(n);i.a},"67bd":function(t,e,a){},"6bd5":function(t,e,a){},"732b":function(t,e,a){"use strict";var n=a("67bd"),i=a.n(n);i.a},"83ba5":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAANYAAAAOCAYAAABTjuJsAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA4RpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDphODA0MGRmNC0yZTI2LWEzNDYtYWQ4Yi1kM2UyNzMyYzVlMzMiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6ODI4NDQ5N0REMTg0MTFFQTlFMUFDMzYxNkI3MEM1NEYiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6ODI4NDQ5N0NEMTg0MTFFQTlFMUFDMzYxNkI3MEM1NEYiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTggKFdpbmRvd3MpIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6NjYzOGVjY2MtODg1Ni04NDQ3LTg3MzQtOTM3NDcwZTExMGU1IiBzdFJlZjpkb2N1bWVudElEPSJhZG9iZTpkb2NpZDpwaG90b3Nob3A6Zjg1Nzc4MmEtOGM1Zi0wZDQ0LTkxNDItZmM1NjY2ODgzNTMwIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+6d4r2QAAAhZJREFUeNrsmk8vA0EYxrvt+tf21q8gHLiLk0bqI6hIJFwrTUQjcXBoe3BxkOBQLjhIBF+B4ISTk4Ny8Qlcqv6U1jM8TSabatCdDZv3SX7ZmXfe0b7pM52xXevyrhZwU7sXTYe7wQrbM+A2IBKZ07f9Nj7g7gsHPSowCpbAFTgiV4xF5fMX+c1vpheWBSZBkf0YWCYxxorMscQPIr/4zXL7KOg4Dp6Ba1AAKhoHWY7lwClQm3AK9IJBE9uyyN9q4rch+kwpD0688puRhaUVW+M3Q5wF1li0xeJqWsEfubKoRC75Lct2gfEU+zkv/GZsYbHYeqHqOgb2HSlJsFfPQZFyHBT5wm82/89ShIitofptjpjdICek/Z2vtP9FbE/rJ7T2oVhF9A0lXPKbUpW8kdcmVBrk1OdV6wujA3SCLhIGERIlEe0aYU6Y+Wp+O2lF87KwRC14ptW5L+QZPIIyeSAl7VrS4mXmK57UfJsrr8JEt6WfM0fBgWN81NEfEZ+IfqiRv+g3Y7fbHT8UD4M0OOY5N8l2mmON5ohE/9ZvQcNFnoNN7obq1qe6AzhN8oyVmHMui0vkF79Zhh9pUnddpsAi2Al83uoscyzM/gRYANuOrVwk+rGff+u3//ZIk3rjW6CHr3UPZkGG7SDHtmRRiQz5LUPPeeo326OC1fY7BzbAKmN9AXkIV2TWb+tgjbF+cOPVG3gXYADshcsKkz16JQAAAABJRU5ErkJggg=="},8619:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"project-detail"},[a("homeHead"),a("el-container",[a("el-main",{staticStyle:{height:"90vh"}},[a("el-tabs",{attrs:{"tab-position":"top"},on:{"tab-click":t.tabClick},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"页面管理",name:"1"}},[a("pageList")],1),a("el-tab-pane",{attrs:{label:"数据集管理",name:"2"}},[t._v(" 数据集管理 ")]),a("el-tab-pane",{attrs:{label:"导航管理",name:"3"}},[a("navManage")],1)],1),a("el-breadcrumb",{staticClass:"my-breadcrumb",attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/project-manage"}}},[t._v(" 项目管理 ")]),a("el-breadcrumb-item",[t._v(t._s(t.projectName))])],1)],1)],1)],1)},i=[],r=a("5530"),o=(a("51a8"),a("0e0b")),s=a("2f62"),l=a("8b55"),c=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"page-list"},[a("el-row",{staticClass:"my-card-wrapper"},[a("el-card",{staticClass:"add gallery",nativeOn:{click:function(e){return t.createPageClick(e)}}},[a("div",{staticClass:"mkaddBox"},[a("div",{staticClass:"borderIco"},[a("i",{staticClass:"iconfont icon-xinjian"})]),a("span",{staticStyle:{"margin-top":"15px"}},[t._v("新建可视化")])])]),t._l(t.pageList,(function(e,n){return a("el-card",{key:n,staticClass:"gallery",attrs:{"body-style":{padding:"0px"}}},[a("div",{staticClass:"editbox"},[a("img",{attrs:{src:e.image||t.defaultPng}}),a("div",{staticClass:"pedit"},[a("i",{staticClass:"iconfont icon-shanchu",on:{click:function(a){return t.handleDelClick(e.pid)}}}),a("el-button",{attrs:{icon:"el-icon-edit",size:"mini"},on:{click:function(a){return t.handleEditClick(e.pid)}}},[t._v(" 编辑 ")])],1)]),a("div",{staticClass:"pbox",staticStyle:{padding:"10px"}},[a("span",{staticClass:"pname",attrs:{title:e.name}},[t._v(t._s(e.name))]),a("router-link",{staticClass:"menu",attrs:{to:{path:"preview",query:{pageId:e.pid}},target:"_blank"}},[a("i",{staticClass:"icon iconfont icon-yulan"}),a("span",[t._v("预览")])])],1)])}))],2),a("el-pagination",{staticStyle:{"text-align":"center"},attrs:{"page-size":t.params.pageSize,total:t.params.total,layout:"total, prev, pager, next, jumper"},on:{"current-change":t.handleCurrentChange}})],1)},u=[],m=(a("4160"),a("159b"),a("24d2")),d=a("9883"),p={name:"pageList",components:{},inject:["projectDetail"],data:function(){return{params:{projectId:this.projectDetail.projectId,pageNum:1,pageSize:17,total:0},defaultPng:""}},computed:Object(r["a"])(Object(r["a"])({},Object(s["d"])(["project"])),{},{pageList:function(){return this.project.pageList}}),watch:{},created:function(){this.getPageList()},mounted:function(){this.calcImg()},updated:function(){this.calcImg()},beforeDestroy:function(){},methods:{calcImg:function(){var t=document.querySelectorAll(".editbox");t.forEach((function(t){var e=t.children[0];t.onmouseover=function(t){var a=e.clientHeight-160;a>0&&(e.style.marginTop=-a+"px")},t.onmouseout=function(){e.style.marginTop=0}}))},createPageClick:function(){var t=d["a"].resolve({path:"/page-design",query:{projectId:this.projectDetail.projectId}});window.open(t.href,"_blank")},handleEditClick:function(t){var e=d["a"].resolve({path:"/page-design",query:{projectId:this.projectDetail.projectId,pageId:t}});window.open(e.href,"_blank")},handleDelClick:function(t){var e=this;this.$confirm("你确定要删除吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){m["a"].deletePageById(t).then((function(t){200==t.code?(e.$message.success("页面删除成功！"),e.getPageList()):e.$alert(t.message,"提示",{confirmButtonText:"确定",type:"info",callback:function(t){}})}))}))["catch"]((function(){}))},handleCurrentChange:function(t){this.params.pageNum=t,this.getPageList()},getPageList:function(){var t=this;m["a"].getPageList(this.params).then((function(e){if(console.log("getPageList -> res",e),200==e.code){var a=e.data;if(a&&a.constructor==Object){var n=a.records||[];t.$store.commit("changePageList",n),t.params.total=a.total||0,a.current>1&&0==n.length&&(t.params.pageNum--,t.getPageList())}}else t.$alert(e.message,"提示",{confirmButtonText:"确定",type:"info",callback:function(t){}})}))}}},h=p,f=(a("093f"),a("2877")),g=Object(f["a"])(h,c,u,!1,null,"0a9ac90c",null),v=g.exports,b=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"nav-manage"},[a("el-form",{ref:"navForm",staticClass:"nav-form",attrs:{model:t.navForm,rules:t.navRules,"label-width":"100px",size:"medium"}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"导航类型：",prop:"typeId"}},[a("el-select",{staticClass:"my-select",attrs:{placeholder:"请选择",filterable:""},on:{change:t.navTypeChange},model:{value:t.navForm.typeId,callback:function(e){t.$set(t.navForm,"typeId",e)},expression:"navForm.typeId"}},t._l(t.navOptions,(function(t,e){return a("el-option",{key:e,attrs:{label:t.name,value:t.type}})})),1)],1)],1),a("el-col",{attrs:{span:12}},["wheelDisc"!=t.navForm.typeId?a("el-form-item",{attrs:{label:"导航位置："}},[a("el-select",{staticClass:"my-select",attrs:{placeholder:"请选择",filterable:""},on:{change:t.navPositionChange},model:{value:t.navForm.positionId,callback:function(e){t.$set(t.navForm,"positionId",e)},expression:"navForm.positionId"}},t._l(t.positionOptions,(function(t,e){return a("el-option",{key:e,attrs:{label:t.name,value:t.type}})})),1)],1):t._e()],1)],1),a("el-form-item",{attrs:{label:"导航菜单："}},[a("el-button",{attrs:{icon:"el-icon-circle-plus-outline",type:"primary",size:"small"},on:{click:function(e){return t.clickAddBtn(t.navForm.menuList)}}},[t._v("添加")])],1),a("el-form-item",[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.navForm.menuList,"row-key":"id",size:"mini",border:"","default-expand-all":"","tree-props":{children:"children",hasChildren:"hasChildren"}}},[a("el-table-column",{attrs:{prop:"name",label:"名称","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"iconPath",label:"图标",width:"60"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.iconPath?a("img",{staticClass:"icon-img",attrs:{src:e.row.iconPath}}):t._e()]}}])}),a("el-table-column",{attrs:{prop:"descr",label:"描述","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"pageName",label:"页面名称","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.pageName||"--")+" ")]}}])}),a("el-table-column",{attrs:{label:"页面参数","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.pageId?Object.keys(e.row.pageParam).length?JSON.stringify(e.row.pageParam):"无":"--")+" ")]}}])}),a("el-table-column",{attrs:{label:"操作",width:"250",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{staticClass:"operate-btn",attrs:{type:"text",size:"mini"},on:{click:function(a){return t.clickAddBtn(e.row.children)}}},[t._v("添加")]),a("el-button",{staticClass:"operate-btn",attrs:{type:"text",size:"mini"},on:{click:function(a){return t.clickModifyBtn(e.row)}}},[t._v("修改")]),a("el-button",{staticClass:"operate-btn",attrs:{type:"text",size:"mini"},on:{click:function(a){return t.deleteMenu(e.row.id)}}},[t._v("删除")])]}}])})],1)],1),a("el-form-item",{attrs:{label:"默认页面：",prop:"menuItemId"}},[a("el-select",{staticClass:"my-select",attrs:{placeholder:"请选择",filterable:""},model:{value:t.navForm.menuItemId,callback:function(e){t.$set(t.navForm,"menuItemId",e)},expression:"navForm.menuItemId"}},t._l(t.allMenuItems,(function(t,e){return a("el-option",{key:e,attrs:{label:t.name,value:t.id}})})),1)],1),a("el-form-item",[a("el-button",{staticClass:"primary-button",attrs:{type:"primary"},on:{click:t.clickSaveBtn}},[t._v("保 存")]),a("el-button",{staticClass:"primary-button",attrs:{type:"success"},on:{click:t.jumpPreviewPage}},[t._v("预 览")])],1)],1),a("addMenuItemDialog",{ref:"addMenuItemDialogRef",on:{addMenu:t.addMenu,modifyMenu:t.modifyMenu}})],1)},I=[],A=(a("a434"),a("b0c0"),a("b64b"),{horizontalNav:[{name:"上方",type:"top"},{name:"左上方",type:"left-top"},{name:"右上方",type:"right-top"},{name:"下方",type:"bottom"},{name:"左下方",type:"left-bottom"},{name:"右下方",type:"right-bottom"}],verticalNav:[{name:"左方",type:"left"},{name:"左上方",type:"left-top"},{name:"左下方",type:"left-bottom"},{name:"右方",type:"right"},{name:"右上方",type:"right-top"},{name:"右下方",type:"right-bottom"}],wheelDisc:[]}),y=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{staticClass:"common-dialog",attrs:{title:t.title,"custom-class":"nav-menu-dialog",width:"40%","append-to-body":"",visible:t.dialogVisible,"close-on-click-modal":!1,"close-on-press-escape":!1,"before-close":t.close},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("el-form",{ref:"form",attrs:{model:t.form,rules:t.rules,"label-width":"100px",size:"medium"}},[a("el-form-item",{attrs:{label:"名称",prop:"name"}},[a("el-input",{attrs:{clearable:""},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),a("el-form-item",{attrs:{label:"图标",prop:"iconPath"}},[a("uploadIcon",{model:{value:t.form.iconPath,callback:function(e){t.$set(t.form,"iconPath",e)},expression:"form.iconPath"}})],1),a("el-form-item",{attrs:{label:"描述",prop:"descr"}},[a("el-input",{attrs:{clearable:""},model:{value:t.form.descr,callback:function(e){t.$set(t.form,"descr",e)},expression:"form.descr"}})],1),"修改"==t.title?a("el-form-item",{attrs:{label:"索引"}},[a("el-select",{staticClass:"my-select",attrs:{placeholder:"请选择"},model:{value:t.currentIndex,callback:function(e){t.currentIndex=e},expression:"currentIndex"}},t._l(t.menuLen,(function(t,e){return a("el-option",{key:e,attrs:{label:e,value:e}})})),1)],1):t._e(),a("el-form-item",{attrs:{label:"页面名称",prop:"pageId"}},[a("el-select",{staticClass:"my-select",attrs:{placeholder:"请选择对应页面",filterable:"",clearable:""},on:{change:t.pageIdChange},model:{value:t.form.pageId,callback:function(e){t.$set(t.form,"pageId",e)},expression:"form.pageId"}},t._l(t.pageList,(function(t,e){return a("el-option",{key:e,attrs:{label:t.name,value:t.pid}})})),1)],1),a("el-form-item",{attrs:{label:"页面参数"}},[a("el-table",{attrs:{data:t.globalParams,size:"mini",border:""}},[a("el-table-column",{attrs:{prop:"name",label:"参数名"}}),a("el-table-column",{attrs:{label:"参数值"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-input",{attrs:{clearable:"",size:"mini"},model:{value:e.row.value,callback:function(a){t.$set(e.row,"value",a)},expression:"scope.row.value"}})]}}])}),a("el-table-column",{attrs:{prop:"description",label:"描述","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"required",label:"是否必填",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.required?"是":"否")+" ")]}}])})],1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticClass:"primary-button",attrs:{type:"primary"},on:{click:t.saveData}},[t._v(" 确 定 ")]),a("el-button",{staticClass:"info-button",on:{click:t.close}},[t._v("取 消")])],1)],1)},M=[],w=(a("99af"),a("d81d"),a("5c07")),k=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-upload",{staticClass:"upload-icon",attrs:{action:t.serverUrl,"show-file-list":!1,"on-success":t.uploadSuccess,"before-upload":t.beforeUpload}},[a("div",{staticClass:"upload-icon-trigger"},[t.iconUrl?[a("img",{staticClass:"icon-img",attrs:{src:t.iconUrl}}),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){return e.stopPropagation(),t.deleteIconUrl(e)}}},[t._v("删除")])]:a("el-button",{attrs:{size:"mini",type:"primary",loading:t.loading}},[t._v(t._s(t.loading?"上传中...":"点击上传"))])],2)])},N=[],j={name:"uploadIcon",props:["value"],data:function(){return{loading:!1}},computed:{iconUrl:{get:function(){return this.value},set:function(t){this.$emit("input",t)}},serverUrl:function(){return o["a"].getServelURL()+"uploadimg"}},methods:{beforeUpload:function(t){var e=t.size/1024/1024<=.5;return e||this.$message.error("上传图标的大小不能超过 500KB!"),this.loading=!0,e},uploadSuccess:function(t,e){this.loading=!1,200==t.code&&(this.iconUrl=t.data)},deleteIconUrl:function(){this.iconUrl=""}}},C=j,D=(a("6343"),Object(f["a"])(C,k,N,!1,null,null,null)),P=D.exports,S={name:"addMenuItemDialog",components:{uploadIcon:P},inject:["navManage"],data:function(){return{dialogVisible:!1,title:"添加",form:{name:"",iconPath:"",descr:"",pageId:"",pageName:"",pageParam:{},children:[]},rules:{name:[{required:!0,message:"请输入名称",trigger:"blur"}]},globalParams:[],currentIndex:0,menuLen:0}},computed:Object(r["a"])(Object(r["a"])({},Object(s["d"])(["project"])),{},{pageList:function(){return this.project.pageList}}),created:function(){},mounted:function(){},beforeDestroy:function(){},methods:{open:function(t){this.title=t,this.dialogVisible=!0},close:function(){var t=this;this.form.name="",this.form.iconPath="",this.form.descr="",this.form.pageId="",this.form.pageName="",this.form.pageParam={},this.form.children=[],this.globalParams=[],this.$nextTick((function(){t.$refs.form.clearValidate()})),this.dialogVisible=!1},pageIdChange:function(t){if(t){this.getPageParams(t);for(var e=this.pageList,a=0;a<e.length;a++){var n=e[a];if(t==n.pid){this.form.pageName=n.name;break}}}else this.globalParams=[],this.form.pageName=""},getPageParams:function(t){var e=this;w["a"].loadPreviewData("".concat(o["a"].appServerURL(),"open/").concat(t)).then((function(t){if(0==t.state)e.$message.error(t.message);else{var a=JSON.parse(t.data.conf),n=a.globalParams||[];e.globalParams=o["a"].deepCopy(n)}}))},fillPageParams:function(t){var e=this;w["a"].loadPreviewData("".concat(o["a"].appServerURL(),"open/").concat(t)).then((function(t){if(0==t.state)e.$message.error(t.message);else{var a=JSON.parse(t.data.conf),n=o["a"].deepCopy(a.globalParams||[]),i=e.form.pageParam;n.map((function(t,e){t.value=i[t.name]})),e.globalParams=n}}))},checkPageParams:function(t){for(var e={},a=0;a<this.globalParams.length;a++){var n=this.globalParams[a];if(n.required&&!n.value)return this.$message.error("页面参数中的必填参数不能为空！"),!1;e[n.name]=n.value}return t.pageParam=e,!0},saveData:function(){var t=this,e=o["a"].deepCopy(this.form),a=this.checkPageParams(e);console.log(e),this.$refs.form.validate((function(n){n&&a&&("添加"==t.title?t.$emit("addMenu",e):t.$emit("modifyMenu",e),t.close())}))}}},E=S,R=(a("3213"),Object(f["a"])(E,y,M,!1,null,null,null)),O=R.exports,Z={name:"navManage",components:{homeHead:l["a"],addMenuItemDialog:O},inject:["projectDetail"],provide:function(){return{navManage:this}},data:function(){return{pageParams:{currentPage:1,pageSize:1e4},currentMenu:null,oldIndex:0,navigationId:null,navForm:{projectId:"",typeId:"",typeName:"",positionId:"",positionName:"",menuItemId:"",menuList:[],maxNavigationItemId:0},navRules:{typeId:[{required:!0,message:"请选择导航类型",trigger:"change"}],menuItemId:[{required:!0,message:"请选择默认菜单项",trigger:"change"}]},positionOptions:[],allMenuItems:[],isPreview:!1}},computed:Object(r["a"])(Object(r["a"])({},Object(s["d"])(["project"])),{},{navOptions:function(){return this.project.navOptions}}),watch:{},created:function(){this.getProjectNav()},mounted:function(){this.navForm.projectId=this.projectDetail.projectId},beforeDestroy:function(){},methods:{navTypeChange:function(t){for(var e=0;e<this.navOptions.length;e++){var a=this.navOptions[e];if(a.type==t){this.navForm.typeName=a.name;break}}this.positionOptions=A[t],this.positionOptions.length?(this.navForm.positionId=this.positionOptions[0].type,this.navForm.positionName=this.positionOptions[0].name):(this.navForm.positionId="",this.navForm.positionName="")},navPositionChange:function(t){for(var e=0;e<this.positionOptions.length;e++){var a=this.positionOptions[e];if(a.type==t){this.navForm.positionName=a.name;break}}},clickAddBtn:function(t){this.currentMenu=t,this.$refs.addMenuItemDialogRef.open("添加")},addMenu:function(t){this.navForm.maxNavigationItemId++,t.id=String(this.navForm.maxNavigationItemId),this.navigationId&&(t.navigationId=this.navigationId),this.currentMenu.push(t);var e=this.navForm.menuList;this.getAllMenuItems(e)},clickModifyBtn:function(t){this.$refs.addMenuItemDialogRef.form=o["a"].deepCopy(t);var e=t.pageId;e&&this.$refs.addMenuItemDialogRef.fillPageParams(e),this.$refs.addMenuItemDialogRef.open("修改");var a=this.navForm.menuList;this.getIndexById(a,t.id)},getIndexById:function(t,e){for(var a=0;a<t.length;a++){var n=t[a];if(n.id==e)return this.currentMenu=t,this.oldIndex=a,this.$refs.addMenuItemDialogRef.currentIndex=a,this.$refs.addMenuItemDialogRef.menuLen=t.length,!0;if(n.children.length){var i=this.getIndexById(n.children,e);if(i)return!0}}return!1},changeIndex:function(){var t=this.$refs.addMenuItemDialogRef.currentIndex,e=this.currentMenu.splice(this.oldIndex,1)[0];this.currentMenu.splice(t,0,e)},modifyMenu:function(t){this.changeIndex();var e=this.navForm.menuList;this.navigationId&&(t.navigationId=this.navigationId),this.iterateModifyMenu(e,t),this.getAllMenuItems(e)},iterateModifyMenu:function(t,e){for(var a=e.id,n=0;n<t.length;n++){var i=t[n];if(i.id==a)return this.$set(t,n,e),!0;if(i.children.length){var r=this.iterateModifyMenu(i.children,e);if(r)return!0}}return!1},deleteMenu:function(t){var e=this.navForm.menuList;this.iterateDeleteMenu(e,t),this.getAllMenuItems(e),this.isInAllMenuItems()||(this.navForm.menuItemId="")},iterateDeleteMenu:function(t,e){for(var a=0;a<t.length;a++){var n=t[a];if(n.id==e)return t.splice(a,1),!0;if(n.children.length){var i=this.iterateDeleteMenu(n.children,e);if(i)return!0}}return!1},isInAllMenuItems:function(){for(var t=0;t<this.allMenuItems.length;t++){var e=this.allMenuItems[t];if(e.id==this.navForm.menuItemId)return!0}return!1},getAllMenuItems:function(t){var e=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];t.forEach((function(t){t.pageId&&a.push({id:t.id,name:t.name}),t.children.length&&e.getAllMenuItems(t.children,a)})),this.allMenuItems=a},checkIsHasMenuItem:function(t){var e=this.iterateMenu(t);return e||this.$message.error("导航菜单中至少得关联一个页面！"),e},iterateMenu:function(t){for(var e=0;e<t.length;e++){var a=t[e];if(a.pageId)return!0;if(a.children.length){var n=this.iterateMenu(a.children);if(n)return!0}}return!1},saveData:function(){var t=this,e=o["a"].deepCopy(this.navForm),a=this.checkIsHasMenuItem(e.menuList);this.$refs.navForm.validate((function(n){n&&a&&(e.navigationItemId=e.menuItemId,m["a"].saveNav(e).then((function(e){if(console.log("saveData -> res",e),200==e.code&&(t.$message.success("保存成功！"),t.getProjectNav(),t.isPreview)){var a=d["a"].resolve({path:"/project-preview",query:{projectId:t.projectDetail.projectId}});window.open(a.href,"_blank")}})))}))},clickSaveBtn:function(){this.isPreview=!1,this.saveData()},jumpPreviewPage:function(){this.isPreview=!0,this.saveData()},getProjectNav:function(){var t=this;m["a"].getNavByProjectId(this.projectDetail.projectId).then((function(e){if(console.log("getProjectNav -> res",e),200==e.code){var a=e.data;if(a&&a.constructor==Object&&Object.keys(a).length){t.navForm=o["a"].deepCopy(a),t.navForm.menuItemId=t.navForm.navigationItemId,t.navigationId=t.navForm.id;var n=t.navForm.typeId;n&&(t.positionOptions=A[n]),t.getAllMenuItems(t.navForm.menuList)}}}))}}},F=Z,G=(a("732b"),Object(f["a"])(F,b,I,!1,null,null,null)),U=G.exports,Y={name:"projectDetail",components:{homeHead:l["a"],pageList:v,navManage:U},provide:function(){return{projectDetail:this}},data:function(){return{projectId:"",projectName:"",activeName:"1"}},computed:Object(r["a"])({},Object(s["d"])([])),watch:{},created:function(){this.init()},mounted:function(){},beforeDestroy:function(){this.$store.commit("changePageList",[])},methods:{init:function(){this.projectId=this.$route.query.projectId,this.projectName=this.$route.query.projectName},tabClick:function(t,e){}}},x=Y,B=(a("4572"),Object(f["a"])(x,n,i,!1,null,null,null));e["default"]=B.exports},"8b55":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-header",{staticClass:"home-header"},[n("div",{staticClass:"back"},[n("a",{attrs:{href:"javascript:void(0)"}},[n("img",{attrs:{src:a("f5a1"),alt:""}})])]),n("div",{staticClass:"logo"},[n("a",[t._v("数据可视化工具")]),n("img",{attrs:{src:a("83ba5")}})]),n("div",{staticClass:"menu-list"},[n("ul",[n("li",{class:{current:t.activeStatus("/myhome")}},[n("router-link",{staticClass:"menu",attrs:{to:{name:"myhome"}}},[n("i",{staticClass:"icon"}),n("span",[t._v("可视化管理")])])],1),t.activeStatus("/myhome")||t.activeStatus("/data-set-manage")?[n("li",{class:{current:t.activeStatus("/datasource")}},[n("router-link",{staticClass:"menu",attrs:{to:{name:"datasource"}}},[n("i",{staticClass:"icon"}),n("span",[t._v("数据源管理")])])],1)]:[n("li",{class:{current:t.activeStatus("/datasource")}},[n("el-dropdown",{attrs:{trigger:"hover",placement:"bottom-start"},on:{command:t.handleCommand}},[n("a",{staticClass:"menu",attrs:{href:"javascript:void(0)"}},[n("i",{staticClass:"icon"}),n("span",[t._v("数据源管理")])]),n("el-dropdown-menu",{staticClass:"header-menu-dropdown",attrs:{slot:"dropdown"},slot:"dropdown"},[n("el-dropdown-item",{class:[{"is-active-menu":"file"===t.menuType}],attrs:{command:"file"}},[t._v("文件")]),n("el-dropdown-item",{class:[{"is-active-menu":"database"===t.menuType}],attrs:{command:"database"}},[t._v("数据库")])],1)],1)],1)],n("li",{class:{current:t.activeStatus("/data-set-manage")}},[n("router-link",{staticClass:"menu",attrs:{to:{name:"dataSetManage"}}},[n("i",{staticClass:"icon"}),n("span",[t._v("数据集管理")])])],1)],2)]),n("div",{staticClass:"user-info"},[n("span",{staticClass:"user-name"},[t._v("用户ID")]),n("el-dropdown",{staticClass:"user-setting"},[n("span",{staticClass:"el-dropdown-link"},[n("img",{attrs:{src:a("04a7"),alt:""}})]),n("el-dropdown-menu",{staticClass:"home-header-dropdown",attrs:{slot:"dropdown"},slot:"dropdown"},[n("el-dropdown-item",[t._v("个人信息")]),n("el-dropdown-item",[n("i",{staticClass:"icon iconfont icon-tuichu"}),t._v("退出 ")])],1)],1),n("a",{staticClass:"logout",attrs:{href:"javascript:void(0)"}},[n("img",{attrs:{src:a("13e1"),alt:""}})])],1)])},i=[],r={data:function(){return{menuType:"database"}},components:{},computed:{},mounted:function(){},methods:{handleCommand:function(t){this.menuType=t,this.$emit("dataTypeChange",t)},activeStatus:function(t){var e=this.$route.path==t;return e}}},o=r,s=(a("2426"),a("40de"),a("2877")),l=Object(s["a"])(o,n,i,!1,null,"69b3434c",null);e["a"]=l.exports},a861:function(t,e,a){},f416:function(t,e,a){},f5a1:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACYAAAAdCAYAAADGgB7AAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA4RpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDphODA0MGRmNC0yZTI2LWEzNDYtYWQ4Yi1kM2UyNzMyYzVlMzMiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6MjM1QjE3NUZEMTgzMTFFQTg2NTVGQTY3MDQ3Q0I5NkEiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MjM1QjE3NUVEMTgzMTFFQTg2NTVGQTY3MDQ3Q0I5NkEiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTggKFdpbmRvd3MpIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6NjYzOGVjY2MtODg1Ni04NDQ3LTg3MzQtOTM3NDcwZTExMGU1IiBzdFJlZjpkb2N1bWVudElEPSJhZG9iZTpkb2NpZDpwaG90b3Nob3A6Zjg1Nzc4MmEtOGM1Zi0wZDQ0LTkxNDItZmM1NjY2ODgzNTMwIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+nbug+AAABCdJREFUeNq8V0toFEEQnZ7f7uwm5iMa4w/UGPHgQRTxIIiI4g8VvIl4EhH0JhGJghKM8Uc8iiKCBsWAIhrwdxD0qCLiB0UENYoaMInJbnbn19NWT6pCG9dTZreh6ElP7/RL1atX1WzZrm6maZqumBwRmgAr9X6ig77P8QwxfoOJh6Xud25ptUy9SS76AX+1fv+ds/AYyj13z2zem7KNpVEkEgGm6yxyvfDJxpaeS/BngAD/ASYtOylr7zF0NjkGZupLYLoA5krQWcfambaNRVqyYxrYdbBcKWDSAwZYBv6DAVoseOEwTA6YJeeCG+QSBqWNFIMCnmGU9CrOjEfCp0XO42ed+BVyESQNLOBRgN8vOUwkod/R9bwFeDRdZ0zLF4Ovcg055p++9uJYdcbqGsx5aaDphHjGdI3XVqW8wWHvI54RldwHWSnBZcBqcI49DTaExJThnARWDWYnkJkSiIfckpQp/o/8tHEINwkE5OMPIvyIh3xgEwQm8LshPpv4XZKNWKZM4tGtjo1bTUOfHmdlyD9ta717m97daN+wBrKyOQgjljTXgDmxhhm6LuB5YFNLT1csDIjWaajPnAK5aEAdew/TQ/RSakqtcwiALdYqM25Kj5JcZEEuftOboseHkW+SU5miF+YrgQgc8gumKhlekgRDKHoSCUGejMsQSIlRIW+RoxiRP7hw+81BKBWNIBfMC3ivUiqCiz1vTzi2MQdkJC2Sq5d/Dcc2XSiJfXhuJOXCwrDVKnKRxyz1MZw1KBepBLLyv5HEcyWlRkz0iksLyiZPqf4kJUbCwFSJ4KpMkVyw7rZ1KyCUsVyALHzefvTBE/r11SNrl9qWMQ/WuRCCJSMTTEtZBvvRP/J0X+fjD6hr1GoJanucGVOqzkGMZ8kfAcdewbQSvWbPnFrdDnKxvBzxgzJ4HKYO4paaBXHbA94o0KLrcQkoi5zKglwE5UpDqL/y/PT4UkdyYSLJMfDCVuTCUN8lPTiP7FLcNak2Xr737rBhsMZRoYu+YMzjmtb14P3JNHAMPOdEIhm5gLPCKsfK9/blXip186/uguSiDsMnxsmFhVJCcpGUjnHM9CHsMly1y1DlYhABUXfhKd2FlJJCwnIhqN/Dc+jSIwhYPC61rl4IFX4yZmXf7pOPXtO78wdWNaVts9H1Qw0uJInpGMgTdBRMQPMgQBE0qDq5HW0Pn0nHjHUXzbPqrsDL+QjsKUxrKZQLZtd1OilzZbkLJdRoGZm5MnKqXIxpiOfHoc5iNmZdn+taBQbcLULsLqyx7gLcmlFUOaPKBYh0phLAzFEMcTWSWZnGjJwBVo97ZF/0HQkvr1iyVE3F/6Zc3pN1uh/sG9iAiZmRRyCDdLXENSoTPzGl7TIBIyUo4v0ipH7MRYDDisYE4y4OuTJ6S5WPWNj/CDAAbrSlGQH2m4EAAAAASUVORK5CYII="},f913:function(t,e,a){}}]);