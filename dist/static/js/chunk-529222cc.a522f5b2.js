(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-529222cc"],{"1dc2":function(t,e,i){},"5eb2":function(t,e,i){"use strict";var n=i("1dc2"),a=i.n(n);a.a},e57f:function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"linkageUI"},[i("div",{staticClass:"title"},[t._v(t._s(t.styleObj.name))]),i("div",{staticClass:"box"},[i("div",{staticClass:"header",staticStyle:{"margin-bottom":"5px","text-align":"right","padding-right":"15px"}},[i("el-button",{attrs:{type:"primary",icon:"el-icon-plus",circle:"",size:"mini",disabled:t.linkComps.length>=t.createCompData.length},on:{click:function(e){return e.stopPropagation(),t.addLinkComp(e)}}})],1),i("el-table",{staticStyle:{width:"100%"},attrs:{data:t.linkComps}},[i("el-table-column",{attrs:{label:"指标卡名称",width:"150px"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择指标卡",size:"mini",clearable:""},model:{value:e.row.id,callback:function(i){t.$set(e.row,"id",i)},expression:"scope.row.id"}},t._l(t.createCompData,(function(e,n){return i("el-option",{key:n,attrs:{label:e[t.fieldMap.name],value:e[t.fieldMap.id],disabled:t.disabledHandle(e[t.fieldMap.id])}})})),1)]}}])}),i("el-table-column",{attrs:{label:"关联组件"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择关联组件",size:"mini",multiple:""},model:{value:e.row.child,callback:function(i){t.$set(e.row,"child",i)},expression:"scope.row.child"}},t._l(t.compList,(function(t){return i("el-option",{key:t.compId,attrs:{label:t.name,value:t.compId}})})),1)]}}])}),i("el-table-column",{attrs:{prop:"operation",label:"操作",width:"60px",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-button",{attrs:{type:"danger",icon:"el-icon-delete",circle:"",title:"删除",size:"mini"},on:{click:function(i){return i.stopPropagation(),t.delLinkComp(e.$index)}}})]}}])})],1)],1)])},a=[],o=(i("99af"),i("4160"),i("caad"),i("a434"),i("b0c0"),i("159b"),i("5530")),l=i("4d70"),c=i("2f62"),s={name:"linkCompIndicatorUI",props:["styleObj"],data:function(){return{linkComps:[],compList:[]}},computed:Object(o["a"])(Object(o["a"])(Object(o["a"])({},Object(c["d"])(["components"])),Object(c["c"])({activeComp:"getFirstActiveComp"})),{},{fieldMap:function(){return this.activeComp.style.fieldMap},createCompData:function(){var t=this.$store.getters.getCompData(this.activeComp.compId);return"static"!=this.activeComp.data.datasource.type?t[0]||[]:t}}),watch:{linkComps:{handler:function(t){JSON.stringify(t)!=JSON.stringify(this.activeComp.style[this.styleObj.value])&&Object(l["d"])(this.styleObj.value,_.cloneDeep(t))},deep:!0}},created:function(){this.linkComps=_.cloneDeep(this.activeComp.style[this.styleObj.value]),this.createCompList(),this.deleteCompId()},methods:{disabledHandle:function(t){for(var e=0;e<this.linkComps.length;e++){var i=this.linkComps[e];if(i.id==t)return!0}return!1},addLinkComp:function(){this.linkComps.push({id:"",child:[]})},delLinkComp:function(t){this.linkComps.splice(t,1)},createCompList:function(){var t=this.components.compMap,e=[];for(var i in t)if(i!==this.activeComp.compId){var n=t[i];e.push({name:"".concat(n["name"],"(").concat(n["compId"],")"),compId:n["compId"]})}this.compList=e},deleteCompId:function(){var t=[];this.compList.forEach((function(e){t.push(e.compId)}));var e=_.cloneDeep(this.linkComps);e.forEach((function(e){for(var i=e.child,n=0;n<i.length;n++){var a=i[n];t.includes(a)||(i.splice(n,1),n--)}})),this.linkComps=e}}},p=s,r=(i("5eb2"),i("2877")),d=Object(r["a"])(p,n,a,!1,null,"0a3bc7f0",null);e["default"]=d.exports}}]);